function Init(a){PrintInitialLogs(),LoadData(a)}function ExportCSV(a){var b="data:text/csv;charset=utf-8,";a.forEach(function(a,c){dataString=a.join(";"),b+=dataString+"\n"});var c=encodeURI(b);window.open(c)}function FetchFlowData(){CurrentFlowMode=TestScriptData.UseCaseAutoFlow,CurrentFlowMode?PrintToConsole("FetchData","Use Case flow is auto."):PrintToConsole("FetchData","Use Case flow is manual.")}function FetchLevelOneData(){CurrentLevelOneTitle=TestScriptData.UseCases[CurrentLevelOne].UseCaseTitle,CurrentLevelOneID=TestScriptData.UseCases[CurrentLevelOne].UseCaseID,CurrentLevelOneLength=TestScriptData.UseCases.length}function FetchLevelTwoData(){CurrentLevelTwoTitle=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionTitle,CurrentLevelTwoID=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionID,CurrentLevelTwoLength=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions.length}function FetchLevelThreeData(){CurrentLevelThreeTitle=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionSteps[CurrentLevelThree].ActionStepTitle,CurrentLevelThreeID=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionSteps[CurrentLevelThree].ActionStepID,CurrentLevelThreeLength=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionSteps.length}function LoadData(a){LoadJSON(a+"UseCaseData.json","Use case data loaded successfully.",function(a){TestScriptData=JSON.parse(a)})}function LoadJSON(a,b,c){var d=new XMLHttpRequest;d.overrideMimeType("application/json"),d.open("GET",a,!0),d.onload=function(){4==d.readyState&&"200"==d.status?(c(d.responseText),PrintToConsole("LoadJSON",b),FetchFlowData()):PrintToConsole("LoadJSON","Data could not be loaded.")},d.send(null)}function UxBeginUseCase(a,b){FetchLevelOneData();var c='User interacted with element "'+b+'". ';return!1!==LevelOneRunning?LevelTwoRunning?LevelThreeRunning?(AddToPrintStack(13,c,b),!0):(AddToPrintStack(8,c,b),!0):(AddToPrintStack(3,c,b),!0):!1===LevelTwoRunning&&!1===LevelThreeRunning?CurrentLevelOne==a?(LevelOneCounter=parseInt(CurrentLevelOne)+1,c+='Begin of use case "'+CurrentLevelOneTitle+'" ['+CurrentLevelOneID+"], ",c+="use case "+LevelOneCounter+" out of "+CurrentLevelOneLength+".",AddToPrintStack(1,c,b),LevelOneRunning=!0,CurrentLevelTwo=0,!0===CurrentFlowMode&&UxBeginAction(a,0,b),!0):(AddToPrintStack(0,c,b),!0):void 0}function UxCompleteUseCase(a,b){FetchLevelOneData();var c='User interacted with element "'+b+'". ';return LevelOneRunning?!1!==LevelTwoRunning?LevelThreeRunning?(AddToPrintStack(13,c,b),!0):(AddToPrintStack(8,c,b),!0):!1===LevelThreeRunning?CurrentLevelOne===a&&CurrentLevelTwo===CurrentLevelTwoLength?(c+='Completion of use case "'+CurrentLevelOneTitle+'" ['+CurrentLevelOneID+"], ",c+="use case "+LevelOneCounter+" out of "+CurrentLevelOneLength+".",AddToPrintStack(4,c,b),LevelOneRunning=!1,CurrentLevelOne++,CurrentFlowMode&&CurrentLevelOne<CurrentLevelOneLength?UxBeginUseCase(a+1,b):CurrentLevelOne==CurrentLevelOneLength&&UxCompleteSession(),!0):(AddToPrintStack(3,c,b),!0):void 0:(AddToPrintStack(2,c,b),!0)}function UxBeginStep(a,b,c,d){FetchLevelThreeData();var e='User interacted with element "'+d+'". ';return LevelOneRunning?LevelTwoRunning?!1===LevelThreeRunning?CurrentLevelOne==a&&CurrentLevelTwo==b&&CurrentLevelThree==c?(LevelThreeCounter=parseInt(CurrentLevelThree)+1,e+='Begin of step "'+CurrentLevelThreeTitle+'" ['+CurrentLevelThreeID+"], ",e+="step "+LevelThreeCounter+" out of "+CurrentLevelThreeLength+".",AddToPrintStack(11,e,d),LevelThreeRunning=!0,!0):(AddToPrintStack(10,e,d),!0):LevelThreeRunning?(AddToPrintStack(13,e,d),!0):void 0:(AddToPrintStack(7,e,d),!0):(AddToPrintStack(2,e,d),!0)}function UxCompleteStep(a,b,c,d){FetchLevelThreeData();var e='User interacted with element "'+d+'". ';return LevelOneRunning?LevelTwoRunning?LevelThreeRunning?CurrentLevelOne==a&&CurrentLevelTwo==b&&CurrentLevelThree==c?(e+='Completion of "'+CurrentLevelThreeTitle+'" ['+CurrentLevelThreeID+"], ",e+="step "+LevelThreeCounter+" out of "+CurrentLevelThreeLength+".",AddToPrintStack(14,e,d),LevelThreeRunning=!1,CurrentLevelThree++,!0===CurrentFlowMode&&(CurrentLevelThree<CurrentLevelThreeLength?UxBeginStep(a,b,c+1,d):CurrentLevelThree===CurrentLevelThreeLength&&UxCompleteAction(a,b,d)),!0):(AddToPrintStack(13,e,d),!0):(AddToPrintStack(12,e,d),!0):(AddToPrintStack(7,e,d),!0):(AddToPrintStack(2,e,d),!0)}function UxBeginAction(a,b,c){FetchLevelTwoData();var d='User interacted with element "'+c+'". ';return LevelOneRunning?!1!==LevelTwoRunning?LevelThreeRunning?(AddToPrintStack(13,d,c),!0):(AddToPrintStack(8,d,c),!0):!1===LevelThreeRunning?CurrentLevelOne==a&&CurrentLevelTwo===b?(LevelTwoCounter=parseInt(CurrentLevelTwo)+1,d+='Begin of action "'+CurrentLevelTwoTitle+'" ['+CurrentLevelTwoID+"], ",d+="action "+LevelTwoCounter+" out of "+CurrentLevelTwoLength+".",AddToPrintStack(6,d,c),LevelTwoRunning=!0,CurrentLevelThree=0,!0===CurrentFlowMode&&UxBeginStep(a,b,0,c),!0):(AddToPrintStack(5,d,c),!0):void 0:(AddToPrintStack(2,d,c),!0)}function UxCompleteAction(a,b,c){FetchLevelTwoData();var d='User interacted with element "'+c+'". ';return LevelOneRunning?LevelTwoRunning?!1===LevelThreeRunning?CurrentLevelOne==a&&CurrentLevelTwo==b&&CurrentLevelThree==CurrentLevelThreeLength?(d+='Completion of action "'+CurrentLevelTwoTitle+'" ['+CurrentLevelTwoID+"], ",d+="action "+LevelTwoCounter+" out of "+CurrentLevelTwoLength+".",AddToPrintStack(9,d,c),LevelTwoRunning=!1,CurrentLevelTwo++,CurrentFlowMode&&(CurrentLevelTwo<CurrentLevelTwoLength?UxBeginAction(a,b+1,c):CurrentLevelTwo===CurrentLevelTwoLength&&UxCompleteUseCase(a,c)),!0):(AddToPrintStack(8,d,c),!0):(AddToPrintStack(13,d,c),!0):(AddToPrintStack(7,d,c),!0):(AddToPrintStack(2,d,c),!0)}function UxSetInteraction(a){var b='User interacted with the "'+a+'" element.';LevelTwoRunning&&LevelThreeRunning?AddToPrintStack(15,b,a):AddToPrintStack(16,b,a)}function UxCompleteSession(){ExportCSV(TestResultsArray)}function PrintBrowserLogs(){PrintBrowserLogsToConsole(),PrintBrowserLogHeaders(),PrintBrowserLogResults()}function PrintBrowserLogsToConsole(){navigator.cookieEnabled?PrintToConsole("GetNavigator","Browser cookies are enabled."):PrintToConsole("GetNavigator","Browser cookies are disabled."),PrintToConsole("GetNavigator","Browser Code Name: "+navigator.appCodeName),PrintToConsole("GetNavigator","Browser Name: "+navigator.appName),PrintToConsole("GetNavigator","Browser Version: "+navigator.appVersion.replace(/;/g," @")),PrintToConsole("GetNavigator","Browser Language: "+navigator.language),PrintToConsole("GetNavigator","Browser Platform: "+navigator.platform),PrintToConsole("GetNavigator","Browser Engine: "+navigator.product),PrintToConsole("GetNavigator","Browser Agent: "+navigator.userAgent.replace(/;/g," @")),navigator.javaEnabled()?PrintToConsole("GetNavigator","Java is enabled."):PrintToConsole("GetNavigator","Java is disabled.")}function PrintBrowserLogHeaders(){TestResultsArray[BrowserLogHeadersCounter]=[],TestResultsArray[BrowserLogHeadersCounter][0]="Browser Details",TestResultsArray[BrowserLogHeadersCounter][1]="Browser Cookies",TestResultsArray[BrowserLogHeadersCounter][2]="Browser Code Name",TestResultsArray[BrowserLogHeadersCounter][3]="Browser Name",TestResultsArray[BrowserLogHeadersCounter][4]="Browser Version",TestResultsArray[BrowserLogHeadersCounter][5]="Browser Language",TestResultsArray[BrowserLogHeadersCounter][6]="Browser Platform",TestResultsArray[BrowserLogHeadersCounter][7]="Browser Engine",TestResultsArray[BrowserLogHeadersCounter][8]="Browser Agent",TestResultsArray[BrowserLogHeadersCounter][9]="Java enabled"}function PrintBrowserLogResults(){TestResultsArray[BrowserLogsCounter]=[],TestResultsArray[BrowserLogsCounter][0]="",TestResultsArray[BrowserLogsCounter][1]=navigator.cookieEnabled,TestResultsArray[BrowserLogsCounter][2]=navigator.appCodeName,TestResultsArray[BrowserLogsCounter][3]=navigator.appName,TestResultsArray[BrowserLogsCounter][4]=navigator.appVersion.replace(/;/g," @"),TestResultsArray[BrowserLogsCounter][5]=navigator.language,TestResultsArray[BrowserLogsCounter][6]=navigator.platform,TestResultsArray[BrowserLogsCounter][7]=navigator.product,TestResultsArray[BrowserLogsCounter][8]=navigator.userAgent.replace(/;/g," @"),TestResultsArray[BrowserLogsCounter][9]=navigator.javaEnabled()}function PrintInitialLogs(){PrintBrowserLogs(),PrintScreenLogs(),PrintUseCaseLogHeaders()}function AddToPrintStack(a,b,c){var d;PrintResults(LogsData[a].message,b,c),d="["+LogConsoleCounter+"] "+LogsData[a].message+"\n"+b,BrowserConsole(d),LogConsoleCounter++}function PrintToConsole(a,b){var c;c=LogConsoleCounter<10?"[0"+LogConsoleCounter+"] > ["+a+"] "+b:"["+LogConsoleCounter+"] > ["+a+"] "+b,BrowserConsole(c),LogConsoleCounter++}function BrowserConsole(a){console.log(a)}function PrintScreenLogs(){PrintScreenLogsToConsole(),PrintScreenLogHeaders(),PrintScreenLogResults()}function PrintScreenLogsToConsole(){PrintToConsole("GetResolution","Screen height: "+window.screen.height),PrintToConsole("GetResolution","Screen width: "+window.screen.width),PrintToConsole("GetResolution","Window available height: "+window.screen.availHeight),PrintToConsole("GetResolution","Window available width: "+window.screen.availWidth),PrintToConsole("GetResolution","Window height: "+window.innerHeight),PrintToConsole("GetResolution","Window width: "+window.innerWidth)}function PrintScreenLogHeaders(){TestResultsArray[ScreenLogHeadersCounter]=[],TestResultsArray[ScreenLogHeadersCounter][0]="Screen details",TestResultsArray[ScreenLogHeadersCounter][1]="Screen height",TestResultsArray[ScreenLogHeadersCounter][2]="Screen width",TestResultsArray[ScreenLogHeadersCounter][3]="Window available height",TestResultsArray[ScreenLogHeadersCounter][4]="Window available width",TestResultsArray[ScreenLogHeadersCounter][5]="Window height",TestResultsArray[ScreenLogHeadersCounter][6]="Window width"}function PrintScreenLogResults(){TestResultsArray[ScreenLogsCounter]=[],TestResultsArray[ScreenLogsCounter][0]="",TestResultsArray[ScreenLogsCounter][1]=window.screen.height,TestResultsArray[ScreenLogsCounter][2]=window.screen.width,TestResultsArray[ScreenLogsCounter][3]=window.screen.availHeight,TestResultsArray[ScreenLogsCounter][4]=window.screen.availWidth,TestResultsArray[ScreenLogsCounter][5]=window.innerHeight,TestResultsArray[ScreenLogsCounter][6]=window.innerWidth}function PrintUseCaseLogHeaders(){TestResultsArray[UseCaseLogHeadersCounter]=[],TestResultsArray[UseCaseLogHeadersCounter][0]="Counter",TestResultsArray[UseCaseLogHeadersCounter][1]="Date",TestResultsArray[UseCaseLogHeadersCounter][2]="Timestamp",TestResultsArray[UseCaseLogHeadersCounter][3]="Timeframe per interaction",TestResultsArray[UseCaseLogHeadersCounter][4]="Trigger Element",TestResultsArray[UseCaseLogHeadersCounter][5]="UseCase no.",TestResultsArray[UseCaseLogHeadersCounter][6]="UseCase title",TestResultsArray[UseCaseLogHeadersCounter][7]="Action no.",TestResultsArray[UseCaseLogHeadersCounter][8]="Action title",TestResultsArray[UseCaseLogHeadersCounter][9]="Step no.",TestResultsArray[UseCaseLogHeadersCounter][10]="Step title",TestResultsArray[UseCaseLogHeadersCounter][11]="Short message",TestResultsArray[UseCaseLogHeadersCounter][12]="Long message"}function PrintResults(a,b,c){var d=Math.floor(Date.now()/1e3);TestResultsArray[UseCaseLogsCounter]=[],TestResultsArray[UseCaseLogsCounter][0]=UseCaseLogsCounter,TestResultsArray[UseCaseLogsCounter][1]=ConvertTime(d),TestResultsArray[UseCaseLogsCounter][2]=d,TestResultsArray[UseCaseLogsCounter][3]=TestResultsArray[UseCaseLogsCounter][2]-TestResultsArray[UseCaseLogsCounter-1][2],TestResultsArray[UseCaseLogsCounter][4]=c,LevelOneRunning?(TestResultsArray[UseCaseLogsCounter][5]=TestScriptData.UseCases[CurrentLevelOne].UseCaseID,TestResultsArray[UseCaseLogsCounter][6]=TestScriptData.UseCases[CurrentLevelOne].UseCaseTitle):(TestResultsArray[UseCaseLogsCounter][5]="",TestResultsArray[UseCaseLogsCounter][6]=""),LevelTwoRunning?(TestResultsArray[UseCaseLogsCounter][7]=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionID,TestResultsArray[UseCaseLogsCounter][8]=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionTitle):(TestResultsArray[UseCaseLogsCounter][7]="",TestResultsArray[UseCaseLogsCounter][8]=""),LevelThreeRunning?(TestResultsArray[UseCaseLogsCounter][9]=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionSteps[CurrentLevelThree].ActionStepID,TestResultsArray[UseCaseLogsCounter][10]=TestScriptData.UseCases[CurrentLevelOne].UseCaseActions[CurrentLevelTwo].ActionSteps[CurrentLevelThree].ActionStepTitle):(TestResultsArray[UseCaseLogsCounter][9]="",TestResultsArray[UseCaseLogsCounter][10]=""),TestResultsArray[UseCaseLogsCounter][11]=a,TestResultsArray[UseCaseLogsCounter][12]=b,UseCaseLogsCounter++}function ConvertTime(a){var b,c=new Date(1e3*a),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=c.getFullYear(),f=d[c.getMonth()],g=c.getDate(),h=c.getHours(),i=c.getMinutes(),j=c.getSeconds();return j<10?b=g+" "+f+" "+e+", "+h+":"+i+":0"+j:j>=10&&(b=g+" "+f+" "+e+", "+h+":"+i+":"+j),b}var CurrentLevelOne=0,CurrentLevelTwo=0,CurrentLevelThree=0,CurrentFlowMode,CurrentLevelOneTitle,CurrentLevelOneID,CurrentLevelOneLength,CurrentLevelTwoTitle,CurrentLevelTwoID,CurrentLevelTwoLength,CurrentLevelThreeTitle,CurrentLevelThreeID,CurrentLevelThreeLength,TestScriptData,LevelOneRunning=!1,LevelTwoRunning=!1,LevelThreeRunning=!1,LevelOneCounter,LevelTwoCounter,LevelThreeCounter,LogsData=[{logid:"0",message:"Wrong use case!"},{logid:"1",message:"Use case started!"},{logid:"2",message:"Use case not yet started!"},{logid:"3",message:"Current use case not yet completed!"},{logid:"4",message:"Use case completed!"},{logid:"5",message:"Wrong action!"},{logid:"6",message:"Action started!"},{logid:"7",message:"Action not yet started!"},{logid:"8",message:"Current action not yet completed!"},{logid:"9",message:"Action completed!"},{logid:"10",message:"Wrong step!"},{logid:"11",message:"Step started!"},{logid:"12",message:"Step not yet started!"},{logid:"13",message:"Current step not yet completed!"},{logid:"14",message:"Step completed!"},{logid:"15",message:"Interaction triggered while step is pending."},{logid:"16",message:"Interaction triggered while step has been completed."}],BrowserLogHeadersCounter=0,BrowserLogsCounter=1,TestResultsArray=[],LogConsoleCounter=0,ScreenLogHeadersCounter=2,ScreenLogsCounter=3,UseCaseLogHeadersCounter=4,UseCaseLogsCounter=5;